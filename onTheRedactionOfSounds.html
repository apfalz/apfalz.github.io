<html>
<head>
<title></title>
<link rel="stylesheet" href="stylesheetasdf.css" type="text/css">
</head>
<body  onmousemove="getMousePosition(event)"
      onmousedown="firstPoint(x, y)"
      onmouseup="drawOnBuffer1(x,y)">
     <!-- menu divs -->

    <!-- canvases -->
<canvas id="redCanvas"; class="onTheRedactionCanvas"; width="900"; height="900"></canvas>  
<canvas id="greenCanvas"; class="onTheRedactionCanvas"; width="900"; height="900"></canvas>
<canvas id="blueCanvas"; class="onTheRedactionCanvas"; width="900"; height="900"></canvas>
    
<canvas id="dblBffr"; width="900"; height="900"; ></canvas>
<canvas id="intersections1"; width="900"; height="900";></canvas>

<script>
    var red = document.getElementById("redCanvas");
    var redCntxt = red.getContext("2d");
    redCntxt.fillStyle='red';
    redCntxt.fillRect(0, 0, red.width, red.height);
    
    var green = document.getElementById("greenCanvas");
    var greenCntxt = green.getContext("2d");
    greenCntxt.fillStyle='green';
    greenCntxt.fillRect(0, 0, green.width, green.height);
    
    var dblBffr = document.getElementById("dblBffr");
    var bffrCntxt = dblBffr.getContext("2d");

    var blue = document.getElementById("blueCanvas");
    var blueCntxt = blue.getContext("2d");
    blueCntxt.fillStyle="blue";
    blueCntxt.fillRect(0, 0, blue.width, blue.height);
    
/*
    function addBuffer() {
        buffer1 = document.createElement("canvas");
        buffer1.width = 900;
        buffer1.height = 900;
        buffer1cntxt = buffer1.getContext('2d');
        console.log("buffer was added");
    }
  */  
    function getMousePosition(event) {
        var area = red.getBoundingClientRect();
         x = event.clientX - area.left;
         y = event.clientY - area.top;
      }
 
    function firstPoint(x, y) {
        upperLeftX = x;
        upperLeftY = y;
    }
   
    /* combine masks (which would be image buffers) pass only differences on to lower masks, apply masks to differnt image layers.
    create a buffer which is a canvas in the DOM
    "double buffering"
    set properties of canvas
    get the 2d context of the buffer
    store the context in an array
    
    
    */
      var intersections1 = document.getElementById("intersections1");

       var interCntxt1 = intersections1.getContext('2d');
    
    function drawOnBuffer1(x, y) {
        finalX = x;
        finalY = y;
        
        //draw a new image into dblBffr
        bffrCntxt.fillRect(upperLeftX, upperLeftY, (finalX - upperLeftX), (finalY - upperLeftY));
        
        //use source-in on previously cut image inside of intersections1 to get intersections
        interCntxt1.globalCompositeOperation = "source-in";
        interCntxt1.fillRect(upperLeftX, upperLeftY, (finalX - upperLeftX), (finalY - upperLeftY));
        
        //apply new shape to red
        redCntxt.globalCompositeOperation = "destination-out";
        redCntxt.drawImage(dblBffr, 0, 0);

        //apply intersections to green
        greenCntxt.globalCompositeOperation= "destination-out";
        greenCntxt.drawImage(intersections1, 0, 0);
                             
        //put new copy of dblBffr int intersection
        interCntxt1.globalCompositeOperation="source-over";
        var updatedBuffer = bffrCntxt.getImageData(0, 0, dblBffr.width, dblBffr.height);
        interCntxt1.putImageData(updatedBuffer, 0, 0);
        
        
    }
    

        
    
</script>

      
  

    

     
</body>
</html>